# RAF NET CCTV Backend Configuration
# ===================================

# Server Configuration
PORT=3000
HOST=0.0.0.0
NODE_ENV=production

# Database Configuration
DATABASE_PATH=/var/www/rafnet-cctv/data/cctv.db

# JWT Configuration
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
JWT_EXPIRATION=24h

# ===================================
# MediaMTX Configuration
# ===================================

# Internal URLs - Backend uses these to communicate with MediaMTX directly
# These should always point to localhost since MediaMTX runs on same server
MEDIAMTX_API_URL=http://localhost:9997
MEDIAMTX_HLS_URL_INTERNAL=http://localhost:8888
MEDIAMTX_WEBRTC_URL_INTERNAL=http://localhost:8889

# ===================================
# Public Stream URLs Configuration
# ===================================
#
# ARCHITECTURE:
# Frontend -> Backend API -> MediaMTX (internal)
# Frontend NEVER accesses MediaMTX directly!
#
# There are TWO ways to configure public stream URLs:
#
# ===================================
# OPTION 1: Relative Paths (Default)
# ===================================
# Backend returns relative URLs, frontend prepends API URL
# 
# Example flow:
# 1. Backend returns: /hls/camera1/index.m3u8
# 2. Frontend prepends API URL: https://api-cctv.raf.my.id/hls/camera1/index.m3u8
# 3. Nginx proxies /hls/* to MediaMTX localhost:8888/*
#
# Configuration:
# PUBLIC_HLS_PATH=/hls
# PUBLIC_WEBRTC_PATH=/webrtc
# (Don't set PUBLIC_STREAM_BASE_URL)
#
# ===================================
# OPTION 2: Absolute URLs (Recommended for Production)
# ===================================
# Backend returns full absolute URLs
#
# Example flow:
# 1. Backend returns: https://api-cctv.raf.my.id/hls/camera1/index.m3u8
# 2. Frontend uses URL directly
# 3. Nginx proxies /hls/* to MediaMTX localhost:8888/*
#
# Configuration:
PUBLIC_STREAM_BASE_URL=https://api-cctv.raf.my.id
PUBLIC_HLS_PATH=/hls
PUBLIC_WEBRTC_PATH=/webrtc
#
# This will generate URLs like:
# - HLS: https://api-cctv.raf.my.id/hls/camera1/index.m3u8
# - WebRTC: https://api-cctv.raf.my.id/webrtc/camera1
#
# ===================================
# IMPORTANT SECURITY NOTES:
# ===================================
# ❌ NEVER expose localhost URLs to frontend:
#    PUBLIC_STREAM_BASE_URL=http://localhost:8888  <- WRONG!
#    PUBLIC_HLS_PATH=http://localhost:8888         <- WRONG!
#
# ✅ Always use your public domain or relative paths:
#    PUBLIC_STREAM_BASE_URL=https://api-cctv.raf.my.id  <- CORRECT!
#    PUBLIC_HLS_PATH=/hls                               <- CORRECT!

# ===================================
# CORS Configuration
# ===================================
# Use * to accept all origins (recommended for production behind nginx)
# Or comma-separated list: http://localhost:5173,https://your-domain.com
CORS_ORIGIN=*
